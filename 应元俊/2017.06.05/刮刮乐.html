<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#lotte{
				text-align: center;
				line-height: 100px;
				font-size: 20px;
				background: cornflowerblue;
				width:200px;
				height: 100px;
				position: relative;
				top:100px;
				z-index: -1;
					
			}
		</style>
	</head>
	
	<body>
		<div id="lotte" >中奖</div>
		<canvas id="canvas" width="200" height="100"></canvas>
		<p>国家欠你们一个没有黑幕的刮刮乐</p>
	</body>
</html>

<script type="text/javascript">
	class Gua{
		constructor(){
			this.canvas=document.getElementById("canvas");
			this.ctx=this.canvas.getContext("2d");
		};
		init(){
			var this_=this;
			this.ctx.fillStyle="gray"
			this.ctx.fillRect(0,0,200,100);		
			this.canvas.addEventListener("mousemove",this_.replace.bind(this_))
		};
		replace(){
			var canvas=this.canvas;
			var e=event||evt;
			var x = e.pageX - canvas.offsetLeft;  
			var y = e.pageY - canvas.offsetTop; 
			this.ctx.globalCompositeOperation = "destination-out";  
			this.ctx.beginPath(); 
			this.ctx.fillStyle = "gray";  
			this.ctx.arc(x,y,10,0,2*Math.PI,true);  
			this.ctx.fill();  
			this.ctx.closePath();  
		};
	}
	
	
	class Bonus{
		constructor(){
			this.prize=["特等奖","一等奖","二等奖","三等奖","再接再厉"];
			this.ele=document.getElementById("lotte");
		};
		init(){
			this.setHtml();
		}
		setHtml(){
			var lever=Math.random();
			var prize=null;
			if(lever>0.95){
				prize=0;
			}else if(lever>0.8){
				prize=1;
			}else if(lever>0.6){
				prize=2;
			}else if(lever>0.4){
				prize=3;
			}else {
				prize=4;
			};
			var html=this.prize[prize];
			this.ele.innerHTML=html;
		}
	}
	
	var gua=new Gua();
	gua.init();
	var bonus=new Bonus();
	bonus.init();
	
</script>