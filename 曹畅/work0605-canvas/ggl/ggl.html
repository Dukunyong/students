<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>刮刮乐</title>
	</head>
	<body>
		<canvas id="canvas" width="100" height="100"></canvas>
	
	<script type="text/javascript">
		function Canvas(){
			this.canvas = document.getElementById("canvas");
			this.ctx = this.canvas.getContext("2d");
		}
		
		Canvas.prototype = {
			constructor:Canvas,
			init:function(){
				this_ = this;
				this.clean();
				this.canvas.onmousemove = function(e){
					this_.handmove(e);
				}
			},
			
			clean:function(){
				this.ctx.fillStyle = "#ccc";
				this.ctx.beginPath();
				this.ctx.fillRect(0,0,100,100);
				this.ctx.closePath();
			},
			
			handmove:function(e){
				var x = e.pageX - canvas.offsetLeft;
				var y = e.pageY - canvas.offsetTop;
				
				this.ctx.globalCompositeOperation = "destination-out";
				this.ctx.beginPath();
				this.ctx.fillStyle = "red";
				this.ctx.arc(x,y,10,0,2*Math.PI,true);
				this.ctx.fill();
				this.ctx.closePath();
			}
			
		}
		
		var ggl = new Canvas();
		ggl.init();
	</script>
	</body>
</html>
